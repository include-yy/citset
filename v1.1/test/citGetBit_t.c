#include <stdint.h>
#include <stdio.h>
#include "citset.h"

/* little-endian is required to get the expected result. (X86) */
/* test on citGetBit(const void * bitfield, size_t index) */

void print_bit(const void * bitfield, size_t start, size_t end);

int main(void)
{
    uint8_t test8 = 0;
    for (int i = 0; i < 8; i++)
    {
        test8 = test8 * 2 + 1;
        printf("%-3d ", test8);
        print_bit(&test8, 0, 8);
        putchar('\n');
    }
    putchar('\n');
    uint16_t test16 = 0;
    for (int i = 0; i < 16; i++)
    {
        test16 = test16 * 2  + 1;
        printf("%-6d ", test16);
        print_bit(&test16, 0, 16);
        putchar('\n');
    }
    putchar('\n');
    uint32_t test32 = 0;
    for (int i = 0; i < 32; i++)
    {
        test32 = test32 * 2 + 1;
        printf("%-11u ", test32);
        print_bit(&test32, 0, 32);
        putchar('\n');
    }
    putchar('\n');
    uint64_t test64 = 0;
    for (int i = 0; i < 64; i++)
    {
        test64 = test64 * 2 + 1;
        printf("%-22llu ", test64);
        print_bit(&test64, 0, 64);
        putchar('\n');
    }
    putchar('\n');

    float testfl = 1.0;
    print_bit(&testfl, 0, 32), putchar('\n');
    for (int i = 0; i < 128; i++)
    {
        testfl = testfl * 2.0;
        print_bit(&testfl, 0, 32);
        putchar('\n');
    }
    putchar('\n');
    testfl = -1.0;
    print_bit(&testfl, 0, 32), putchar('\n');
    for (int i = 0; i < 128; i++)
    {
        testfl = testfl * -2.0;
        print_bit(&testfl, 0, 32);
        putchar('\n');
    }

    return 0;
}

void print_bit(const void * bitfield, size_t start, size_t end)
{
    int per_eight = 0;
    for (; start < end; start = start + 1)
    {
        if (per_eight == 8)
        {
            putchar(' ');
            per_eight = 0;
        }
        per_eight++;
        printf("%d", citGetBit(bitfield, start));
    }
}

/* the expected result */

/*
citGetBit_t
1   00000001
3   00000011
7   00000111
15  00001111
31  00011111
63  00111111
127 01111111
255 11111111

1      00000001 00000000
3      00000011 00000000
7      00000111 00000000
15     00001111 00000000
31     00011111 00000000
63     00111111 00000000
127    01111111 00000000
255    11111111 00000000
511    11111111 00000001
1023   11111111 00000011
2047   11111111 00000111
4095   11111111 00001111
8191   11111111 00011111
16383  11111111 00111111
32767  11111111 01111111
65535  11111111 11111111

1           00000001 00000000 00000000 00000000
3           00000011 00000000 00000000 00000000
7           00000111 00000000 00000000 00000000
15          00001111 00000000 00000000 00000000
31          00011111 00000000 00000000 00000000
63          00111111 00000000 00000000 00000000
127         01111111 00000000 00000000 00000000
255         11111111 00000000 00000000 00000000
511         11111111 00000001 00000000 00000000
1023        11111111 00000011 00000000 00000000
2047        11111111 00000111 00000000 00000000
4095        11111111 00001111 00000000 00000000
8191        11111111 00011111 00000000 00000000
16383       11111111 00111111 00000000 00000000
32767       11111111 01111111 00000000 00000000
65535       11111111 11111111 00000000 00000000
131071      11111111 11111111 00000001 00000000
262143      11111111 11111111 00000011 00000000
524287      11111111 11111111 00000111 00000000
1048575     11111111 11111111 00001111 00000000
2097151     11111111 11111111 00011111 00000000
4194303     11111111 11111111 00111111 00000000
8388607     11111111 11111111 01111111 00000000
16777215    11111111 11111111 11111111 00000000
33554431    11111111 11111111 11111111 00000001
67108863    11111111 11111111 11111111 00000011
134217727   11111111 11111111 11111111 00000111
268435455   11111111 11111111 11111111 00001111
536870911   11111111 11111111 11111111 00011111
1073741823  11111111 11111111 11111111 00111111
2147483647  11111111 11111111 11111111 01111111
4294967295  11111111 11111111 11111111 11111111

1                      00000001 00000000 00000000 00000000 00000000 00000000 00000000 00000000
3                      00000011 00000000 00000000 00000000 00000000 00000000 00000000 00000000
7                      00000111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
15                     00001111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
31                     00011111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
63                     00111111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
127                    01111111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
255                    11111111 00000000 00000000 00000000 00000000 00000000 00000000 00000000
511                    11111111 00000001 00000000 00000000 00000000 00000000 00000000 00000000
1023                   11111111 00000011 00000000 00000000 00000000 00000000 00000000 00000000
2047                   11111111 00000111 00000000 00000000 00000000 00000000 00000000 00000000
4095                   11111111 00001111 00000000 00000000 00000000 00000000 00000000 00000000
8191                   11111111 00011111 00000000 00000000 00000000 00000000 00000000 00000000
16383                  11111111 00111111 00000000 00000000 00000000 00000000 00000000 00000000
32767                  11111111 01111111 00000000 00000000 00000000 00000000 00000000 00000000
65535                  11111111 11111111 00000000 00000000 00000000 00000000 00000000 00000000
131071                 11111111 11111111 00000001 00000000 00000000 00000000 00000000 00000000
262143                 11111111 11111111 00000011 00000000 00000000 00000000 00000000 00000000
524287                 11111111 11111111 00000111 00000000 00000000 00000000 00000000 00000000
1048575                11111111 11111111 00001111 00000000 00000000 00000000 00000000 00000000
2097151                11111111 11111111 00011111 00000000 00000000 00000000 00000000 00000000
4194303                11111111 11111111 00111111 00000000 00000000 00000000 00000000 00000000
8388607                11111111 11111111 01111111 00000000 00000000 00000000 00000000 00000000
16777215               11111111 11111111 11111111 00000000 00000000 00000000 00000000 00000000
33554431               11111111 11111111 11111111 00000001 00000000 00000000 00000000 00000000
67108863               11111111 11111111 11111111 00000011 00000000 00000000 00000000 00000000
134217727              11111111 11111111 11111111 00000111 00000000 00000000 00000000 00000000
268435455              11111111 11111111 11111111 00001111 00000000 00000000 00000000 00000000
536870911              11111111 11111111 11111111 00011111 00000000 00000000 00000000 00000000
1073741823             11111111 11111111 11111111 00111111 00000000 00000000 00000000 00000000
2147483647             11111111 11111111 11111111 01111111 00000000 00000000 00000000 00000000
4294967295             11111111 11111111 11111111 11111111 00000000 00000000 00000000 00000000
8589934591             11111111 11111111 11111111 11111111 00000001 00000000 00000000 00000000
17179869183            11111111 11111111 11111111 11111111 00000011 00000000 00000000 00000000
34359738367            11111111 11111111 11111111 11111111 00000111 00000000 00000000 00000000
68719476735            11111111 11111111 11111111 11111111 00001111 00000000 00000000 00000000
137438953471           11111111 11111111 11111111 11111111 00011111 00000000 00000000 00000000
274877906943           11111111 11111111 11111111 11111111 00111111 00000000 00000000 00000000
549755813887           11111111 11111111 11111111 11111111 01111111 00000000 00000000 00000000
1099511627775          11111111 11111111 11111111 11111111 11111111 00000000 00000000 00000000
2199023255551          11111111 11111111 11111111 11111111 11111111 00000001 00000000 00000000
4398046511103          11111111 11111111 11111111 11111111 11111111 00000011 00000000 00000000
8796093022207          11111111 11111111 11111111 11111111 11111111 00000111 00000000 00000000
17592186044415         11111111 11111111 11111111 11111111 11111111 00001111 00000000 00000000
35184372088831         11111111 11111111 11111111 11111111 11111111 00011111 00000000 00000000
70368744177663         11111111 11111111 11111111 11111111 11111111 00111111 00000000 00000000
140737488355327        11111111 11111111 11111111 11111111 11111111 01111111 00000000 00000000
281474976710655        11111111 11111111 11111111 11111111 11111111 11111111 00000000 00000000
562949953421311        11111111 11111111 11111111 11111111 11111111 11111111 00000001 00000000
1125899906842623       11111111 11111111 11111111 11111111 11111111 11111111 00000011 00000000
2251799813685247       11111111 11111111 11111111 11111111 11111111 11111111 00000111 00000000
4503599627370495       11111111 11111111 11111111 11111111 11111111 11111111 00001111 00000000
9007199254740991       11111111 11111111 11111111 11111111 11111111 11111111 00011111 00000000
18014398509481983      11111111 11111111 11111111 11111111 11111111 11111111 00111111 00000000
36028797018963967      11111111 11111111 11111111 11111111 11111111 11111111 01111111 00000000
72057594037927935      11111111 11111111 11111111 11111111 11111111 11111111 11111111 00000000
144115188075855871     11111111 11111111 11111111 11111111 11111111 11111111 11111111 00000001
288230376151711743     11111111 11111111 11111111 11111111 11111111 11111111 11111111 00000011
576460752303423487     11111111 11111111 11111111 11111111 11111111 11111111 11111111 00000111
1152921504606846975    11111111 11111111 11111111 11111111 11111111 11111111 11111111 00001111
2305843009213693951    11111111 11111111 11111111 11111111 11111111 11111111 11111111 00011111
4611686018427387903    11111111 11111111 11111111 11111111 11111111 11111111 11111111 00111111
9223372036854775807    11111111 11111111 11111111 11111111 11111111 11111111 11111111 01111111
18446744073709551615   11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111

00000000 00000000 10000000 00111111
00000000 00000000 00000000 01000000
00000000 00000000 10000000 01000000
00000000 00000000 00000000 01000001
00000000 00000000 10000000 01000001
00000000 00000000 00000000 01000010
00000000 00000000 10000000 01000010
00000000 00000000 00000000 01000011
00000000 00000000 10000000 01000011
00000000 00000000 00000000 01000100
00000000 00000000 10000000 01000100
00000000 00000000 00000000 01000101
00000000 00000000 10000000 01000101
00000000 00000000 00000000 01000110
00000000 00000000 10000000 01000110
00000000 00000000 00000000 01000111
00000000 00000000 10000000 01000111
00000000 00000000 00000000 01001000
00000000 00000000 10000000 01001000
00000000 00000000 00000000 01001001
00000000 00000000 10000000 01001001
00000000 00000000 00000000 01001010
00000000 00000000 10000000 01001010
00000000 00000000 00000000 01001011
00000000 00000000 10000000 01001011
00000000 00000000 00000000 01001100
00000000 00000000 10000000 01001100
00000000 00000000 00000000 01001101
00000000 00000000 10000000 01001101
00000000 00000000 00000000 01001110
00000000 00000000 10000000 01001110
00000000 00000000 00000000 01001111
00000000 00000000 10000000 01001111
00000000 00000000 00000000 01010000
00000000 00000000 10000000 01010000
00000000 00000000 00000000 01010001
00000000 00000000 10000000 01010001
00000000 00000000 00000000 01010010
00000000 00000000 10000000 01010010
00000000 00000000 00000000 01010011
00000000 00000000 10000000 01010011
00000000 00000000 00000000 01010100
00000000 00000000 10000000 01010100
00000000 00000000 00000000 01010101
00000000 00000000 10000000 01010101
00000000 00000000 00000000 01010110
00000000 00000000 10000000 01010110
00000000 00000000 00000000 01010111
00000000 00000000 10000000 01010111
00000000 00000000 00000000 01011000
00000000 00000000 10000000 01011000
00000000 00000000 00000000 01011001
00000000 00000000 10000000 01011001
00000000 00000000 00000000 01011010
00000000 00000000 10000000 01011010
00000000 00000000 00000000 01011011
00000000 00000000 10000000 01011011
00000000 00000000 00000000 01011100
00000000 00000000 10000000 01011100
00000000 00000000 00000000 01011101
00000000 00000000 10000000 01011101
00000000 00000000 00000000 01011110
00000000 00000000 10000000 01011110
00000000 00000000 00000000 01011111
00000000 00000000 10000000 01011111
00000000 00000000 00000000 01100000
00000000 00000000 10000000 01100000
00000000 00000000 00000000 01100001
00000000 00000000 10000000 01100001
00000000 00000000 00000000 01100010
00000000 00000000 10000000 01100010
00000000 00000000 00000000 01100011
00000000 00000000 10000000 01100011
00000000 00000000 00000000 01100100
00000000 00000000 10000000 01100100
00000000 00000000 00000000 01100101
00000000 00000000 10000000 01100101
00000000 00000000 00000000 01100110
00000000 00000000 10000000 01100110
00000000 00000000 00000000 01100111
00000000 00000000 10000000 01100111
00000000 00000000 00000000 01101000
00000000 00000000 10000000 01101000
00000000 00000000 00000000 01101001
00000000 00000000 10000000 01101001
00000000 00000000 00000000 01101010
00000000 00000000 10000000 01101010
00000000 00000000 00000000 01101011
00000000 00000000 10000000 01101011
00000000 00000000 00000000 01101100
00000000 00000000 10000000 01101100
00000000 00000000 00000000 01101101
00000000 00000000 10000000 01101101
00000000 00000000 00000000 01101110
00000000 00000000 10000000 01101110
00000000 00000000 00000000 01101111
00000000 00000000 10000000 01101111
00000000 00000000 00000000 01110000
00000000 00000000 10000000 01110000
00000000 00000000 00000000 01110001
00000000 00000000 10000000 01110001
00000000 00000000 00000000 01110010
00000000 00000000 10000000 01110010
00000000 00000000 00000000 01110011
00000000 00000000 10000000 01110011
00000000 00000000 00000000 01110100
00000000 00000000 10000000 01110100
00000000 00000000 00000000 01110101
00000000 00000000 10000000 01110101
00000000 00000000 00000000 01110110
00000000 00000000 10000000 01110110
00000000 00000000 00000000 01110111
00000000 00000000 10000000 01110111
00000000 00000000 00000000 01111000
00000000 00000000 10000000 01111000
00000000 00000000 00000000 01111001
00000000 00000000 10000000 01111001
00000000 00000000 00000000 01111010
00000000 00000000 10000000 01111010
00000000 00000000 00000000 01111011
00000000 00000000 10000000 01111011
00000000 00000000 00000000 01111100
00000000 00000000 10000000 01111100
00000000 00000000 00000000 01111101
00000000 00000000 10000000 01111101
00000000 00000000 00000000 01111110
00000000 00000000 10000000 01111110
00000000 00000000 00000000 01111111
00000000 00000000 10000000 01111111

00000000 00000000 10000000 10111111
00000000 00000000 00000000 01000000
00000000 00000000 10000000 11000000
00000000 00000000 00000000 01000001
00000000 00000000 10000000 11000001
00000000 00000000 00000000 01000010
00000000 00000000 10000000 11000010
00000000 00000000 00000000 01000011
00000000 00000000 10000000 11000011
00000000 00000000 00000000 01000100
00000000 00000000 10000000 11000100
00000000 00000000 00000000 01000101
00000000 00000000 10000000 11000101
00000000 00000000 00000000 01000110
00000000 00000000 10000000 11000110
00000000 00000000 00000000 01000111
00000000 00000000 10000000 11000111
00000000 00000000 00000000 01001000
00000000 00000000 10000000 11001000
00000000 00000000 00000000 01001001
00000000 00000000 10000000 11001001
00000000 00000000 00000000 01001010
00000000 00000000 10000000 11001010
00000000 00000000 00000000 01001011
00000000 00000000 10000000 11001011
00000000 00000000 00000000 01001100
00000000 00000000 10000000 11001100
00000000 00000000 00000000 01001101
00000000 00000000 10000000 11001101
00000000 00000000 00000000 01001110
00000000 00000000 10000000 11001110
00000000 00000000 00000000 01001111
00000000 00000000 10000000 11001111
00000000 00000000 00000000 01010000
00000000 00000000 10000000 11010000
00000000 00000000 00000000 01010001
00000000 00000000 10000000 11010001
00000000 00000000 00000000 01010010
00000000 00000000 10000000 11010010
00000000 00000000 00000000 01010011
00000000 00000000 10000000 11010011
00000000 00000000 00000000 01010100
00000000 00000000 10000000 11010100
00000000 00000000 00000000 01010101
00000000 00000000 10000000 11010101
00000000 00000000 00000000 01010110
00000000 00000000 10000000 11010110
00000000 00000000 00000000 01010111
00000000 00000000 10000000 11010111
00000000 00000000 00000000 01011000
00000000 00000000 10000000 11011000
00000000 00000000 00000000 01011001
00000000 00000000 10000000 11011001
00000000 00000000 00000000 01011010
00000000 00000000 10000000 11011010
00000000 00000000 00000000 01011011
00000000 00000000 10000000 11011011
00000000 00000000 00000000 01011100
00000000 00000000 10000000 11011100
00000000 00000000 00000000 01011101
00000000 00000000 10000000 11011101
00000000 00000000 00000000 01011110
00000000 00000000 10000000 11011110
00000000 00000000 00000000 01011111
00000000 00000000 10000000 11011111
00000000 00000000 00000000 01100000
00000000 00000000 10000000 11100000
00000000 00000000 00000000 01100001
00000000 00000000 10000000 11100001
00000000 00000000 00000000 01100010
00000000 00000000 10000000 11100010
00000000 00000000 00000000 01100011
00000000 00000000 10000000 11100011
00000000 00000000 00000000 01100100
00000000 00000000 10000000 11100100
00000000 00000000 00000000 01100101
00000000 00000000 10000000 11100101
00000000 00000000 00000000 01100110
00000000 00000000 10000000 11100110
00000000 00000000 00000000 01100111
00000000 00000000 10000000 11100111
00000000 00000000 00000000 01101000
00000000 00000000 10000000 11101000
00000000 00000000 00000000 01101001
00000000 00000000 10000000 11101001
00000000 00000000 00000000 01101010
00000000 00000000 10000000 11101010
00000000 00000000 00000000 01101011
00000000 00000000 10000000 11101011
00000000 00000000 00000000 01101100
00000000 00000000 10000000 11101100
00000000 00000000 00000000 01101101
00000000 00000000 10000000 11101101
00000000 00000000 00000000 01101110
00000000 00000000 10000000 11101110
00000000 00000000 00000000 01101111
00000000 00000000 10000000 11101111
00000000 00000000 00000000 01110000
00000000 00000000 10000000 11110000
00000000 00000000 00000000 01110001
00000000 00000000 10000000 11110001
00000000 00000000 00000000 01110010
00000000 00000000 10000000 11110010
00000000 00000000 00000000 01110011
00000000 00000000 10000000 11110011
00000000 00000000 00000000 01110100
00000000 00000000 10000000 11110100
00000000 00000000 00000000 01110101
00000000 00000000 10000000 11110101
00000000 00000000 00000000 01110110
00000000 00000000 10000000 11110110
00000000 00000000 00000000 01110111
00000000 00000000 10000000 11110111
00000000 00000000 00000000 01111000
00000000 00000000 10000000 11111000
00000000 00000000 00000000 01111001
00000000 00000000 10000000 11111001
00000000 00000000 00000000 01111010
00000000 00000000 10000000 11111010
00000000 00000000 00000000 01111011
00000000 00000000 10000000 11111011
00000000 00000000 00000000 01111100
00000000 00000000 10000000 11111100
00000000 00000000 00000000 01111101
00000000 00000000 10000000 11111101
00000000 00000000 00000000 01111110
00000000 00000000 10000000 11111110
00000000 00000000 00000000 01111111
00000000 00000000 10000000 11111111
*/